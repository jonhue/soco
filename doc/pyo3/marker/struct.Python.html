<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A marker token that represents holding the GIL."><meta name="keywords" content="rust, rustlang, rust-lang, Python"><title>Python in pyo3::marker - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../pyo3/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../pyo3/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Python</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#implementations">Methods</a></h3><ul><li><a href="#method.None">None</a></li><li><a href="#method.NotImplemented">NotImplemented</a></li><li><a href="#method.acquire_gil">acquire_gil</a></li><li><a href="#method.allow_threads">allow_threads</a></li><li><a href="#method.assume_gil_acquired">assume_gil_acquired</a></li><li><a href="#method.cast_as">cast_as</a></li><li><a href="#method.check_signals">check_signals</a></li><li><a href="#method.checked_cast_as">checked_cast_as</a></li><li><a href="#method.eval">eval</a></li><li><a href="#method.from_borrowed_ptr">from_borrowed_ptr</a></li><li><a href="#method.from_borrowed_ptr_or_err">from_borrowed_ptr_or_err</a></li><li><a href="#method.from_borrowed_ptr_or_opt">from_borrowed_ptr_or_opt</a></li><li><a href="#method.from_owned_ptr">from_owned_ptr</a></li><li><a href="#method.from_owned_ptr_or_err">from_owned_ptr_or_err</a></li><li><a href="#method.from_owned_ptr_or_opt">from_owned_ptr_or_opt</a></li><li><a href="#method.get_type">get_type</a></li><li><a href="#method.import">import</a></li><li><a href="#method.new_pool">new_pool</a></li><li><a href="#method.run">run</a></li><li><a href="#method.version">version</a></li><li><a href="#method.version_info">version_info</a></li><li><a href="#method.with_gil">with_gil</a></li><li><a href="#method.with_gil_unchecked">with_gil_unchecked</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#trait-implementations">Trait Implementations</a></h3><ul><li><a href="#impl-Clone">Clone</a></li><li><a href="#impl-Copy">Copy</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul><li><a href="#impl-RefUnwindSafe">RefUnwindSafe</a></li><li><a href="#impl-Send">!Send</a></li><li><a href="#impl-Sync">!Sync</a></li><li><a href="#impl-Unpin">Unpin</a></li><li><a href="#impl-UnwindSafe">UnwindSafe</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#blanket-implementations">Blanket Implementations</a></h3><ul><li><a href="#impl-Any">Any</a></li><li><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a></li><li><a href="#impl-ToOwned">ToOwned</a></li><li><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></li></ul></div></section><h2 class="location"><a href="index.html">In pyo3::marker</a></h2><div id="sidebar-vars" data-name="Python" data-ty="struct" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../pyo3/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Struct <a href="../index.html">pyo3</a>::<wbr><a href="index.html">marker</a>::<wbr><a class="struct" href="#">Python</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/pyo3/marker.rs.html#274">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust struct"><code>pub struct Python&lt;'py&gt;(_);</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A marker token that represents holding the GIL.</p>
<p>It serves three main purposes:</p>
<ul>
<li>It provides a global API for the Python interpreter, such as <a href="struct.Python.html#method.eval" title="Python::eval"><code>Python::eval</code></a>.</li>
<li>It can be passed to functions that require a proof of holding the GIL, such as
<a href="../prelude/struct.Py.html#method.clone_ref"><code>Py::clone_ref</code></a>.</li>
<li>Its lifetime represents the scope of holding the GIL which can be used to create Rust
references that are bound to it, such as <code>&amp;</code><a href="../prelude/struct.PyAny.html" title="PyAny"><code>PyAny</code></a>.</li>
</ul>
<p>Note that there are some caveats to using it that you might need to be aware of. See the
<a href="#deadlocks">Deadlocks</a> and <a href="#releasing-and-freeing-memory">Releasing and freeing memory</a>
paragraphs for more information about that.</p>
<h2 id="obtaining-a-python-token"><a href="#obtaining-a-python-token">Obtaining a Python token</a></h2>
<p>The following are the recommended ways to obtain a <a href="struct.Python.html" title="Python"><code>Python</code></a> token, in order of preference:</p>
<ul>
<li>In a function or method annotated with <a href="../attr.pyfunction.html"><code>#[pyfunction]</code></a> or <a href="../attr.pymethods.html"><code>#[pymethods]</code></a> you can declare it
as a parameter, and PyO3 will pass in the token when Python code calls it.</li>
<li>If you already have something with a lifetime bound to the GIL, such as <code>&amp;</code><a href="../prelude/struct.PyAny.html" title="PyAny"><code>PyAny</code></a>, you can
use its <a href="../prelude/struct.PyAny.html#method.py" title="PyAny::py"><code>.py()</code></a> method to get a token.</li>
<li>When you need to acquire the GIL yourself, such as when calling Python code from Rust, you
should call <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a> to do that and pass your code as a closure to it.</li>
</ul>
<h2 id="deadlocks"><a href="#deadlocks">Deadlocks</a></h2>
<p>Note that the GIL can be temporarily released by the Python interpreter during a function call
(e.g. importing a module). In general, you don’t need to worry about this because the GIL is
reacquired before returning to the Rust code:</p>
<div class="example-wrap"><pre class="language-text"><code>`Python` exists   |=====================================|
GIL actually held |==========|         |================|
Rust code running |=======|                |==|  |======|</code></pre></div>
<p>This behaviour can cause deadlocks when trying to lock a Rust mutex while holding the GIL:</p>
<ul>
<li>Thread 1 acquires the GIL</li>
<li>Thread 1 locks a mutex</li>
<li>Thread 1 makes a call into the Python interpreter which releases the GIL</li>
<li>Thread 2 acquires the GIL</li>
<li>Thread 2 tries to locks the mutex, blocks</li>
<li>Thread 1’s Python interpreter call blocks trying to reacquire the GIL held by thread 2</li>
</ul>
<p>To avoid deadlocking, you should release the GIL before trying to lock a mutex or <code>await</code>ing in
asynchronous code, e.g. with <a href="struct.Python.html#method.allow_threads" title="Python::allow_threads"><code>Python::allow_threads</code></a>.</p>
<h2 id="releasing-and-freeing-memory"><a href="#releasing-and-freeing-memory">Releasing and freeing memory</a></h2>
<p>The <a href="struct.Python.html" title="Python"><code>Python</code></a> type can be used to create references to variables owned by the Python
interpreter, using functions such as <a href="struct.Python.html#method.eval" title="Python::eval"><code>Python::eval</code></a> and <a href="../prelude/struct.PyModule.html#method.import" title="PyModule::import"><code>PyModule::import</code></a>. These
references are tied to a <a href="../struct.GILPool.html" title="GILPool"><code>GILPool</code></a> whose references are not cleared until it is dropped.
This can cause apparent “memory leaks” if it is kept around for a long time.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">pyo3::prelude</span>::<span class="kw-2">*</span>;
<span class="kw">use</span> <span class="ident">pyo3::types::PyString</span>;

<span class="ident">Python::with_gil</span>(<span class="op">|</span><span class="ident">py</span><span class="op">|</span> -&gt; <span class="ident">PyResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
    <span class="kw">for</span> <span class="kw">_</span> <span class="kw">in</span> <span class="number">0</span>..<span class="number">10</span> {
        <span class="kw">let</span> <span class="ident">hello</span>: <span class="kw-2">&amp;</span><span class="ident">PyString</span> <span class="op">=</span> <span class="ident">py</span>.<span class="ident">eval</span>(<span class="string">&quot;\&quot;Hello World!\&quot;&quot;</span>, <span class="prelude-val">None</span>, <span class="prelude-val">None</span>)<span class="question-mark">?</span>.<span class="ident">extract</span>()<span class="question-mark">?</span>;
        <span class="macro">println!</span>(<span class="string">&quot;Python says: {}&quot;</span>, <span class="ident">hello</span>.<span class="ident">to_str</span>()<span class="question-mark">?</span>);
        <span class="comment">// Normally variables in a loop scope are dropped here, but `hello` is a reference to</span>
        <span class="comment">// something owned by the Python interpreter. Dropping this reference does nothing.</span>
    }
    <span class="prelude-val">Ok</span>(())
})
<span class="comment">// This is where the `hello`&#39;s reference counts start getting decremented.</span></code></pre></div>
<p>The variable <code>hello</code> is dropped at the end of each loop iteration, but the lifetime of the
pointed-to memory is bound to <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a>’s <a href="../struct.GILPool.html" title="GILPool"><code>GILPool</code></a> which will not be dropped until
the end of <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a>’s scope. Only then is each <code>hello</code>’s Python reference count
decreased. This means that at the last line of the example there are 10 copies of <code>hello</code> in
Python’s memory, not just one at a time as we might expect from Rust’s <a href="https://doc.rust-lang.org/stable/book/ch04-01-what-is-ownership.html#ownership-rules">scoping rules</a>.</p>
<p>See the <a href="https://pyo3.rs/main/memory.html#gil-bound-memory">Memory Management</a> chapter of the guide for more information about how PyO3 uses
<a href="../struct.GILPool.html" title="GILPool"><code>GILPool</code></a> to manage memory.</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><div id="implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#276-347">source</a></span><a href="#impl" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'_&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.with_gil" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#310-315">source</a></span><a href="#method.with_gil" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.with_gil" class="fnname">with_gil</a>&lt;F, R&gt;(f: F) -&gt; R <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: for&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;) -&gt; R,&nbsp;</span></h4></section></summary><div class="docblock"><p>Acquires the global interpreter lock, allowing access to the Python interpreter. The
provided closure <code>F</code> will be executed with the acquired <code>Python</code> marker token.</p>
<p>If the <a href="https://pyo3.rs/main/features.html#auto-initialize"><code>auto-initialize</code></a> feature is enabled and the Python runtime is not already
initialized, this function will initialize it. See
<a href="../fn.prepare_freethreaded_python.html"><code>prepare_freethreaded_python</code></a>
for details.</p>
<h5 id="panics"><a href="#panics">Panics</a></h5>
<ul>
<li>If the <a href="https://pyo3.rs/main/features.html#auto-initialize"><code>auto-initialize</code></a> feature is not enabled and the Python interpreter is not
initialized.</li>
</ul>
<h5 id="examples"><a href="#examples">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">pyo3::prelude</span>::<span class="kw-2">*</span>;

<span class="ident">Python::with_gil</span>(<span class="op">|</span><span class="ident">py</span><span class="op">|</span> -&gt; <span class="ident">PyResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
    <span class="kw">let</span> <span class="ident">x</span>: <span class="ident">i32</span> <span class="op">=</span> <span class="ident">py</span>.<span class="ident">eval</span>(<span class="string">&quot;5&quot;</span>, <span class="prelude-val">None</span>, <span class="prelude-val">None</span>)<span class="question-mark">?</span>.<span class="ident">extract</span>()<span class="question-mark">?</span>;
    <span class="macro">assert_eq!</span>(<span class="ident">x</span>, <span class="number">5</span>);
    <span class="prelude-val">Ok</span>(())
})</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.with_gil_unchecked" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#341-346">source</a></span><a href="#method.with_gil_unchecked" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.with_gil_unchecked" class="fnname">with_gil_unchecked</a>&lt;F, R&gt;(f: F) -&gt; R <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: for&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;) -&gt; R,&nbsp;</span></h4></section></summary><div class="docblock"><p>Like <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a> except Python interpreter state checking is skipped.</p>
<p>Normally when the GIL is acquired, we check that the Python interpreter is an
appropriate state (e.g. it is fully initialized). This function skips those
checks.</p>
<h5 id="safety"><a href="#safety">Safety</a></h5>
<p>If <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a> would succeed, it is safe to call this function.</p>
<p>In most cases, you should use <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a>.</p>
<p>A justified scenario for calling this function is during multi-phase interpreter
initialization when <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a> would fail before
<a href="../ffi/fn._Py_InitializeMain.html"><code>_Py_InitializeMain</code></a>
is called because the interpreter is only partially initialized.</p>
<p>Behavior in other scenarios is not documented.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-1" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#349-867">source</a></span><a href="#impl-1" class="anchor"></a><h3 class="code-header in-band">impl&lt;'py&gt; <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.acquire_gil" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#383-385">source</a></span><a href="#method.acquire_gil" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.acquire_gil" class="fnname">acquire_gil</a>() -&gt; <a class="struct" href="../prelude/struct.GILGuard.html" title="struct pyo3::prelude::GILGuard">GILGuard</a></h4></section></summary><div class="docblock"><p>Acquires the global interpreter lock, allowing access to the Python interpreter.</p>
<p>If the <a href="https://pyo3.rs/main/features.html#auto-initialize"><code>auto-initialize</code></a> feature is enabled and the Python runtime is not already
initialized, this function will initialize it. See
<a href="../fn.prepare_freethreaded_python.html"><code>prepare_freethreaded_python</code></a>
for details.</p>
<p>Most users should not need to use this API directly, and should prefer one of two options:</p>
<ol>
<li>If implementing <a href="../attr.pymethods.html"><code>#[pymethods]</code></a> or <a href="../attr.pyfunction.html"><code>#[pyfunction]</code></a>,  declare <code>py: Python</code> as an argument.
PyO3 will pass in the token to grant access to the GIL context in which the function is running.</li>
<li>Use <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a> to run a closure with the GIL, acquiring only if needed.</li>
</ol>
<h5 id="panics-1"><a href="#panics-1">Panics</a></h5>
<ul>
<li>If the <a href="https://pyo3.rs/main/features.html#auto-initialize"><code>auto-initialize</code></a> feature is not enabled and the Python interpreter is not
initialized.</li>
<li>If multiple <a href="../prelude/struct.GILGuard.html" title="GILGuard"><code>GILGuard</code></a>s are not dropped in in the reverse order of acquisition, PyO3
may panic. It is recommended to use <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a> instead to avoid this.</li>
</ul>
<h5 id="notes"><a href="#notes">Notes</a></h5>
<p>The return type from this function, <a href="../prelude/struct.GILGuard.html" title="GILGuard"><code>GILGuard</code></a>, is implemented as a RAII guard
around <a href="../ffi/fn.PyGILState_Ensure.html"><code>PyGILState_Ensure</code></a>. This means that multiple <code>acquire_gil()</code> calls are
allowed, and will not deadlock. However, <a href="../prelude/struct.GILGuard.html" title="GILGuard"><code>GILGuard</code></a>s must be dropped in the reverse order
to acquisition. If PyO3 detects this order is not maintained, it will panic when the out-of-order drop occurs.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.allow_threads" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#448-477">source</a></span><a href="#method.allow_threads" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.allow_threads" class="fnname">allow_threads</a>&lt;T, F&gt;(self, f: F) -&gt; T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="trait.Ungil.html" title="trait pyo3::marker::Ungil">Ungil</a> + <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; T,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="trait.Ungil.html" title="trait pyo3::marker::Ungil">Ungil</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Temporarily releases the GIL, thus allowing other Python threads to run. The GIL will be
reacquired when <code>F</code>’s scope ends.</p>
<p>If you don’t need to touch the Python
interpreter for some time and have other Python threads around, this will let you run
Rust-only code while letting those other Python threads make progress.</p>
<p>Only types that implement <a href="trait.Ungil.html" title="Ungil"><code>Ungil</code></a> can cross the closure. See the
<a href="index.html">module level documentation</a> for more information.</p>
<p>If you need to pass Python objects into the closure you can use <a href="../prelude/struct.Py.html"><code>Py</code></a><code>&lt;T&gt;</code>to create a
reference independent of the GIL lifetime. However, you cannot do much with those without a
<a href="struct.Python.html" title="Python"><code>Python</code></a> token, for which you’d need to reacquire the GIL.</p>
<h5 id="example-releasing-the-gil-while-running-a-computation-in-rust-only-code"><a href="#example-releasing-the-gil-while-running-a-computation-in-rust-only-code">Example: Releasing the GIL while running a computation in Rust-only code</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">pyo3::prelude</span>::<span class="kw-2">*</span>;

<span class="attribute">#[<span class="ident">pyfunction</span>]</span>
<span class="kw">fn</span> <span class="ident">sum_numbers</span>(<span class="ident">py</span>: <span class="ident">Python</span><span class="op">&lt;</span><span class="lifetime">&#39;_</span><span class="op">&gt;</span>, <span class="ident">numbers</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span>) -&gt; <span class="ident">PyResult</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span> {
    <span class="comment">// We release the GIL here so any other Python threads get a chance to run.</span>
    <span class="ident">py</span>.<span class="ident">allow_threads</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
        <span class="comment">// An example of an &quot;expensive&quot; Rust calculation</span>
        <span class="kw">let</span> <span class="ident">sum</span> <span class="op">=</span> <span class="ident">numbers</span>.<span class="ident">iter</span>().<span class="ident">sum</span>();

        <span class="prelude-val">Ok</span>(<span class="ident">sum</span>)
    })
}</code></pre></div>
<p>Please see the <a href="https://pyo3.rs/main/parallelism.html">Parallelism</a> chapter of the guide for a thorough discussion of using
<a href="struct.Python.html#method.allow_threads" title="Python::allow_threads"><code>Python::allow_threads</code></a> in this manner.</p>
<h5 id="example-passing-borrowed-python-references-into-the-closure-is-not-allowed"><a href="#example-passing-borrowed-python-references-into-the-closure-is-not-allowed">Example: Passing borrowed Python references into the closure is not allowed</a></h5>
<div class='information'><div class='tooltip compile_fail'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered compile_fail"><code><span class="kw">use</span> <span class="ident">pyo3::prelude</span>::<span class="kw-2">*</span>;
<span class="kw">use</span> <span class="ident">pyo3::types::PyString</span>;

<span class="kw">fn</span> <span class="ident">parallel_print</span>(<span class="ident">py</span>: <span class="ident">Python</span><span class="op">&lt;</span><span class="lifetime">&#39;_</span><span class="op">&gt;</span>) {
    <span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">PyString::new</span>(<span class="ident">py</span>, <span class="string">&quot;This object cannot be accessed without holding the GIL &gt;_&lt;&quot;</span>);
    <span class="ident">py</span>.<span class="ident">allow_threads</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
        <span class="macro">println!</span>(<span class="string">&quot;{:?}&quot;</span>, <span class="ident">s</span>); <span class="comment">// This causes a compile error.</span>
    });
}</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.eval" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#494-501">source</a></span><a href="#method.eval" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.eval" class="fnname">eval</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;code: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.str.html">str</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;globals: <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;locals: <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;<br>) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;&amp;'py <a class="struct" href="../prelude/struct.PyAny.html" title="struct pyo3::prelude::PyAny">PyAny</a>&gt;</h4></section></summary><div class="docblock"><p>Evaluates a Python expression in the given context and returns the result.</p>
<p>If <code>globals</code> is <code>None</code>, it defaults to Python module <code>__main__</code>.
If <code>locals</code> is <code>None</code>, it defaults to the value of <code>globals</code>.</p>
<h5 id="examples-1"><a href="#examples-1">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">py</span>.<span class="ident">eval</span>(<span class="string">&quot;[i * 10 for i in range(5)]&quot;</span>, <span class="prelude-val">None</span>, <span class="prelude-val">None</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">res</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">result</span>.<span class="ident">extract</span>().<span class="ident">unwrap</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>])</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#534-544">source</a></span><a href="#method.run" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.run" class="fnname">run</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;code: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.str.html">str</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;globals: <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;locals: <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;<br>) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Executes one or more Python statements in the given context.</p>
<p>If <code>globals</code> is <code>None</code>, it defaults to Python module <code>__main__</code>.
If <code>locals</code> is <code>None</code>, it defaults to the value of <code>globals</code>.</p>
<h5 id="examples-2"><a href="#examples-2">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">pyo3</span>::{
    <span class="ident">prelude</span>::<span class="kw-2">*</span>,
    <span class="ident">types</span>::{<span class="ident">PyBytes</span>, <span class="ident">PyDict</span>},
};
<span class="ident">Python::with_gil</span>(<span class="op">|</span><span class="ident">py</span><span class="op">|</span> {
    <span class="kw">let</span> <span class="ident">locals</span> <span class="op">=</span> <span class="ident">PyDict::new</span>(<span class="ident">py</span>);
    <span class="ident">py</span>.<span class="ident">run</span>(
        <span class="string">r#&quot;
import base64
s = &#39;Hello Rust!&#39;
ret = base64.b64encode(s.encode(&#39;utf-8&#39;))
&quot;#</span>,
        <span class="prelude-val">None</span>,
        <span class="prelude-val">Some</span>(<span class="ident">locals</span>),
    )
    .<span class="ident">unwrap</span>();
    <span class="kw">let</span> <span class="ident">ret</span> <span class="op">=</span> <span class="ident">locals</span>.<span class="ident">get_item</span>(<span class="string">&quot;ret&quot;</span>).<span class="ident">unwrap</span>();
    <span class="kw">let</span> <span class="ident">b64</span>: <span class="kw-2">&amp;</span><span class="ident">PyBytes</span> <span class="op">=</span> <span class="ident">ret</span>.<span class="ident">downcast</span>().<span class="ident">unwrap</span>();
    <span class="macro">assert_eq!</span>(<span class="ident">b64</span>.<span class="ident">as_bytes</span>(), <span class="string">b&quot;SGVsbG8gUnVzdCE=&quot;</span>);
});</code></pre></div>
<p>You can use <a href="macro.py_run.html"><code>py_run!</code></a> for a handy alternative of <code>run</code>
if you don’t need <code>globals</code> and unwrapping is OK.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_type" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#584-589">source</a></span><a href="#method.get_type" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_type" class="fnname">get_type</a>&lt;T&gt;(self) -&gt; &amp;'py <a class="struct" href="../types/struct.PyType.html" title="struct pyo3::types::PyType">PyType</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../type_object/trait.PyTypeObject.html" title="trait pyo3::type_object::PyTypeObject">PyTypeObject</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Gets the Python type object for type <code>T</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.import" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#592-594">source</a></span><a href="#method.import" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.import" class="fnname">import</a>(self, name: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.str.html">str</a>) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;&amp;'py <a class="struct" href="../prelude/struct.PyModule.html" title="struct pyo3::prelude::PyModule">PyModule</a>&gt;</h4></section></summary><div class="docblock"><p>Imports the Python module with the specified name.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.None" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#599-601">source</a></span><a href="#method.None" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.None" class="fnname">None</a>(self) -&gt; <a class="type" href="../prelude/type.PyObject.html" title="type pyo3::prelude::PyObject">PyObject</a></h4></section></summary><div class="docblock"><p>Gets the Python builtin value <code>None</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.NotImplemented" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#606-608">source</a></span><a href="#method.NotImplemented" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.NotImplemented" class="fnname">NotImplemented</a>(self) -&gt; <a class="type" href="../prelude/type.PyObject.html" title="type pyo3::prelude::PyObject">PyObject</a></h4></section></summary><div class="docblock"><p>Gets the Python builtin value <code>NotImplemented</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.version" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#621-627">source</a></span><a href="#method.version" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.version" class="fnname">version</a>(self) -&gt; &amp;'py <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.str.html">str</a></h4></section></summary><div class="docblock"><p>Gets the running Python interpreter version as a string.</p>
<h5 id="examples-3"><a href="#examples-3">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="ident">Python::with_gil</span>(<span class="op">|</span><span class="ident">py</span><span class="op">|</span> {
    <span class="comment">// The full string could be, for example:</span>
    <span class="comment">// &quot;3.10.0 (tags/v3.10.0:b494f59, Oct  4 2021, 19:00:18) [MSC v.1929 64 bit (AMD64)]&quot;</span>
    <span class="macro">assert!</span>(<span class="ident">py</span>.<span class="ident">version</span>().<span class="ident">starts_with</span>(<span class="string">&quot;3.&quot;</span>));
});</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.version_info" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#641-649">source</a></span><a href="#method.version_info" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.version_info" class="fnname">version_info</a>(self) -&gt; <a class="struct" href="../struct.PythonVersionInfo.html" title="struct pyo3::PythonVersionInfo">PythonVersionInfo</a>&lt;'py&gt;</h4></section></summary><div class="docblock"><p>Gets the running Python interpreter version as a struct similar to
<code>sys.version_info</code>.</p>
<h5 id="examples-4"><a href="#examples-4">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="ident">Python::with_gil</span>(<span class="op">|</span><span class="ident">py</span><span class="op">|</span> {
    <span class="comment">// PyO3 supports Python 3.7 and up.</span>
    <span class="macro">assert!</span>(<span class="ident">py</span>.<span class="ident">version_info</span>() <span class="op">&gt;</span><span class="op">=</span> (<span class="number">3</span>, <span class="number">7</span>));
    <span class="macro">assert!</span>(<span class="ident">py</span>.<span class="ident">version_info</span>() <span class="op">&gt;</span><span class="op">=</span> (<span class="number">3</span>, <span class="number">7</span>, <span class="number">0</span>));
});</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.checked_cast_as" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#652-658">source</a></span><a href="#method.checked_cast_as" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.checked_cast_as" class="fnname">checked_cast_as</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;obj: <a class="type" href="../prelude/type.PyObject.html" title="type pyo3::prelude::PyObject">PyObject</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;'py </a>T, <a class="struct" href="../struct.PyDowncastError.html" title="struct pyo3::PyDowncastError">PyDowncastError</a>&lt;'py&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../conversion/trait.PyTryFrom.html" title="trait pyo3::conversion::PyTryFrom">PyTryFrom</a>&lt;'py&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Registers the object in the release pool, and tries to downcast to specific type.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.cast_as" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#666-672">source</a></span><a href="#method.cast_as" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.cast_as" class="fnname">cast_as</a>&lt;T&gt;(self, obj: <a class="type" href="../prelude/type.PyObject.html" title="type pyo3::prelude::PyObject">PyObject</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;'py </a>T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../trait.PyNativeType.html" title="trait pyo3::PyNativeType">PyNativeType</a> + <a class="trait" href="../type_object/trait.PyTypeInfo.html" title="trait pyo3::type_object::PyTypeInfo">PyTypeInfo</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Registers the object in the release pool, and does an unchecked downcast
to the specific type.</p>
<h5 id="safety-1"><a href="#safety-1">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from_owned_ptr" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#681-686">source</a></span><a href="#method.from_owned_ptr" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.from_owned_ptr" class="fnname">from_owned_ptr</a>&lt;T&gt;(self, ptr: <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;'py </a>T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Registers the object pointer in the release pool,
and does an unchecked downcast to the specific type.</p>
<h5 id="safety-2"><a href="#safety-2">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from_owned_ptr_or_err" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#697-702">source</a></span><a href="#method.from_owned_ptr_or_err" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.from_owned_ptr_or_err" class="fnname">from_owned_ptr_or_err</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;ptr: <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a><br>) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;'py </a>T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Registers the owned object pointer in the release pool.</p>
<p>Returns <code>Err(PyErr)</code> if the pointer is NULL.
Does an unchecked downcast to the specific type.</p>
<h5 id="safety-3"><a href="#safety-3">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from_owned_ptr_or_opt" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#713-718">source</a></span><a href="#method.from_owned_ptr_or_opt" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.from_owned_ptr_or_opt" class="fnname">from_owned_ptr_or_opt</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;ptr: <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;'py </a>T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Registers the owned object pointer in release pool.</p>
<p>Returns <code>None</code> if the pointer is NULL.
Does an unchecked downcast to the specific type.</p>
<h5 id="safety-4"><a href="#safety-4">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from_borrowed_ptr" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#728-733">source</a></span><a href="#method.from_borrowed_ptr" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.from_borrowed_ptr" class="fnname">from_borrowed_ptr</a>&lt;T&gt;(self, ptr: <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;'py </a>T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Does an unchecked downcast to the specific type.</p>
<p>Panics if the pointer is NULL.</p>
<h5 id="safety-5"><a href="#safety-5">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from_borrowed_ptr_or_err" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#743-748">source</a></span><a href="#method.from_borrowed_ptr_or_err" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.from_borrowed_ptr_or_err" class="fnname">from_borrowed_ptr_or_err</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;ptr: <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a><br>) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;'py </a>T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Does an unchecked downcast to the specific type.</p>
<p>Returns <code>Err(PyErr)</code> if the pointer is NULL.</p>
<h5 id="safety-6"><a href="#safety-6">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from_borrowed_ptr_or_opt" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#758-763">source</a></span><a href="#method.from_borrowed_ptr_or_opt" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.from_borrowed_ptr_or_opt" class="fnname">from_borrowed_ptr_or_opt</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;ptr: <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;'py </a>T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Does an unchecked downcast to the specific type.</p>
<p>Returns <code>None</code> if the pointer is NULL.</p>
<h5 id="safety-7"><a href="#safety-7">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.check_signals" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#804-807">source</a></span><a href="#method.check_signals" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.check_signals" class="fnname">check_signals</a>(self) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Lets the Python interpreter check and handle any pending signals. This will invoke the
corresponding signal handlers registered in Python (if any).</p>
<p>Returns <code>Err(</code><a href="../prelude/struct.PyErr.html" title="PyErr"><code>PyErr</code></a><code>)</code> if any signal handler raises an exception.</p>
<p>These signals include <code>SIGINT</code> (normally raised by CTRL + C), which by default raises
<code>KeyboardInterrupt</code>. For this reason it is good practice to call this function regularly
as part of long-running Rust functions so that users can cancel it.</p>
<h5 id="example"><a href="#example">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">pyo3::prelude</span>::<span class="kw-2">*</span>;

<span class="attribute">#[<span class="ident">pyfunction</span>]</span>
<span class="kw">fn</span> <span class="ident">loop_forever</span>(<span class="ident">py</span>: <span class="ident">Python</span><span class="op">&lt;</span><span class="lifetime">&#39;_</span><span class="op">&gt;</span>) -&gt; <span class="ident">PyResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
    <span class="kw">loop</span> {
        <span class="comment">// As this loop is infinite it should check for signals every once in a while.</span>
        <span class="comment">// Using `?` causes any `PyErr` (potentially containing `KeyboardInterrupt`)</span>
        <span class="comment">// to break out of the loop.</span>
        <span class="ident">py</span>.<span class="ident">check_signals</span>()<span class="question-mark">?</span>;

        <span class="comment">// do work here</span>
    }
}</code></pre></div>
<h5 id="note"><a href="#note">Note</a></h5>
<p>This function calls <a href="https://docs.python.org/3/c-api/exceptions.html?highlight=pyerr_checksignals#c.PyErr_CheckSignals"><code>PyErr_CheckSignals()</code></a> which in turn may call signal handlers.
As Python’s <a href="https://docs.python.org/3/library/signal.html"><code>signal</code></a> API allows users to define custom signal handlers, calling this
function allows arbitary Python code inside signal handlers to run.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new_pool" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#864-866">source</a></span><a href="#method.new_pool" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.new_pool" class="fnname">new_pool</a>(self) -&gt; <a class="struct" href="../struct.GILPool.html" title="struct pyo3::GILPool">GILPool</a></h4></section></summary><div class="docblock"><p>Create a new pool for managing PyO3’s owned references.</p>
<p>When this <code>GILPool</code> is dropped, all PyO3 owned references created after this <code>GILPool</code> will
all have their Python reference counts decremented, potentially allowing Python to drop
the corresponding Python objects.</p>
<p>Typical usage of PyO3 will not need this API, as <a href="struct.Python.html#method.with_gil" title="Python::with_gil"><code>Python::with_gil</code></a> and
<a href="struct.Python.html#method.acquire_gil" title="Python::acquire_gil"><code>Python::acquire_gil</code></a> automatically create a <code>GILPool</code> where appropriate.</p>
<p>Advanced uses of PyO3 which perform long-running tasks which never free the GIL may need
to use this API to clear memory, as PyO3 usually does not clear memory until the GIL is
released.</p>
<h5 id="examples-5"><a href="#examples-5">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="ident">Python::with_gil</span>(<span class="op">|</span><span class="ident">py</span><span class="op">|</span> {
    <span class="comment">// Some long-running process like a webserver, which never releases the GIL.</span>
    <span class="kw">loop</span> {
        <span class="comment">// Create a new pool, so that PyO3 can clear memory at the end of the loop.</span>
        <span class="kw">let</span> <span class="ident">pool</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">py</span>.<span class="ident">new_pool</span>() };

        <span class="comment">// It is recommended to *always* immediately set py to the pool&#39;s Python, to help</span>
        <span class="comment">// avoid creating references with invalid lifetimes.</span>
        <span class="kw">let</span> <span class="ident">py</span> <span class="op">=</span> <span class="ident">pool</span>.<span class="ident">python</span>();

        <span class="comment">// do stuff...</span>
    }
});</code></pre></div>
<h5 id="safety-8"><a href="#safety-8">Safety</a></h5>
<p>Extreme care must be taken when using this API, as misuse can lead to accessing invalid
memory. In addition, the caller is responsible for guaranteeing that the GIL remains held
for the entire lifetime of the returned <code>GILPool</code>.</p>
<p>Two best practices are required when using this API:</p>
<ul>
<li>From the moment <code>new_pool()</code> is called, only the <code>Python</code> token from the returned
<code>GILPool</code> (accessible using <a href="../struct.GILPool.html#method.python"><code>.python()</code></a>) should be used in PyO3 APIs. All other older
<code>Python</code> tokens with longer lifetimes are unsafe to use until the <code>GILPool</code> is dropped,
because they can be used to create PyO3 owned references which have lifetimes which
outlive the <code>GILPool</code>.</li>
<li>Similarly, methods on existing owned references will implicitly refer back to the
<code>Python</code> token which that reference was originally created with. If the returned values
from these methods are owned references they will inherit the same lifetime. As a result,
Rust’s lifetime rules may allow them to outlive the <code>GILPool</code>, even though this is not
safe for reasons discussed above. Care must be taken to never access these return values
after the <code>GILPool</code> is dropped, unless they are converted to <code>Py&lt;T&gt;</code> <em>before</em> the pool
is dropped.</li>
</ul>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-2" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#869-890">source</a></span><a href="#impl-2" class="anchor"></a><h3 class="code-header in-band">impl&lt;'unbound&gt; <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'unbound&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.assume_gil_acquired" class="method has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#887-889">source</a></span><a href="#method.assume_gil_acquired" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.assume_gil_acquired" class="fnname">assume_gil_acquired</a>() -&gt; <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'unbound&gt;</h4></section></summary><div class="docblock"><p>Unsafely creates a Python token with an unbounded lifetime.</p>
<p>Many of PyO3 APIs use <code>Python&lt;'_&gt;</code> as proof that the GIL is held, but this function can be
used to call them unsafely.</p>
<h5 id="safety-9"><a href="#safety-9">Safety</a></h5>
<ul>
<li>This token and any borrowed Python references derived from it can only be safely used
whilst the currently executing thread is actually holding the GIL.</li>
<li>This function creates a token with an <em>unbounded</em> lifetime. Safe code can assume that
holding a <code>Python&lt;'py&gt;</code> token means the GIL is and stays acquired for the lifetime <code>'py</code>.
If you let it or borrowed Python references escape to safe code you are
responsible for bounding the lifetime <code>'unbound</code> appropriately. For more on unbounded
lifetimes, see the <a href="https://doc.rust-lang.org/nomicon/unbounded-lifetimes.html">nomicon</a>.</li>
</ul>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Clone" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#273">source</a></span><a href="#impl-Clone" class="anchor"></a><h3 class="code-header in-band">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#273">source</a></span><a href="#method.clone" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/core/clone/trait.Clone.html#tymethod.clone" class="fnname">clone</a>(&amp;self) -&gt; <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h4></section></summary><div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/1.62.1/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/clone.rs.html#133-135">source</a></span><a href="#method.clone_from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/core/clone/trait.Clone.html#method.clone_from" class="fnname">clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;</a>Self)</h4></section></summary><div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/1.62.1/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></details></div></details><section id="impl-Copy" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/pyo3/marker.rs.html#273">source</a></span><a href="#impl-Copy" class="anchor"></a><h3 class="code-header in-band">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe" class="impl has-srclink"><a href="#impl-RefUnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section><section id="impl-Send" class="impl has-srclink"><a href="#impl-Send" class="anchor"></a><h3 class="code-header in-band">impl&lt;'py&gt; !<a class="trait" href="https://doc.rust-lang.org/1.62.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section><section id="impl-Sync" class="impl has-srclink"><a href="#impl-Sync" class="anchor"></a><h3 class="code-header in-band">impl&lt;'py&gt; !<a class="trait" href="https://doc.rust-lang.org/1.62.1/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section><section id="impl-Unpin" class="impl has-srclink"><a href="#impl-Unpin" class="anchor"></a><h3 class="code-header in-band">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section><section id="impl-UnwindSafe" class="impl has-srclink"><a href="#impl-UnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Any" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/any.rs.html#132-136">source</a></span><a href="#impl-Any" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.62.1/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/any.rs.html#133">source</a></span><a href="#method.type_id" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.62.1/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.62.1/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/borrow.rs.html#209-214">source</a></span><a href="#impl-Borrow%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.62.1/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/borrow.rs.html#211">source</a></span><a href="#method.borrow" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;</a>T</h4></section></summary><div class='docblock'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.62.1/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/borrow.rs.html#218-222">source</a></span><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.62.1/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/borrow.rs.html#219">source</a></span><a href="#method.borrow_mut" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;mut </a>T</h4></section></summary><div class='docblock'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.62.1/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-From%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/convert/mod.rs.html#557-562">source</a></span><a href="#impl-From%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/convert/mod.rs.html#559">source</a></span><a href="#method.from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/convert/mod.rs.html#541-552">source</a></span><a href="#impl-Into%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/convert/mod.rs.html#549">source</a></span><a href="#method.into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.62.1/core/convert/trait.From.html" title="From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-ToOwned" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/alloc/borrow.rs.html#84-96">source</a></span><a href="#impl-ToOwned" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/alloc/borrow/trait.ToOwned.html" title="trait alloc::borrow::ToOwned">ToOwned</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Owned" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Owned" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.62.1/alloc/borrow/trait.ToOwned.html#associatedtype.Owned" class="associatedtype">Owned</a> = T</h4></section></summary><div class='docblock'><p>The resulting type after obtaining ownership.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.to_owned" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/alloc/borrow.rs.html#89">source</a></span><a href="#method.to_owned" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/alloc/borrow/trait.ToOwned.html#tymethod.to_owned" class="fnname">to_owned</a>(&amp;self) -&gt; T</h4></section></summary><div class='docblock'><p>Creates owned data from borrowed data, usually by cloning. <a href="https://doc.rust-lang.org/1.62.1/alloc/borrow/trait.ToOwned.html#tymethod.to_owned">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone_into" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/alloc/borrow.rs.html#93">source</a></span><a href="#method.clone_into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/alloc/borrow/trait.ToOwned.html#method.clone_into" class="fnname">clone_into</a>(&amp;self, target: <a class="primitive" href="https://doc.rust-lang.org/1.62.1/std/primitive.reference.html">&amp;mut </a>T)</h4></section></summary><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>toowned_clone_into</code>)</div></span><div class='docblock'><p>Uses borrowed data to replace owned data, usually by cloning. <a href="https://doc.rust-lang.org/1.62.1/alloc/borrow/trait.ToOwned.html#method.clone_into">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/convert/mod.rs.html#598-607">source</a></span><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/convert/mod.rs.html#604">source</a></span><a href="#method.try_from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/convert/mod.rs.html#583-592">source</a></span><a href="#impl-TryInto%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.62.1/src/core/convert/mod.rs.html#589">source</a></span><a href="#method.try_into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.62.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.62.1/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="pyo3" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.62.1 (e092d0b6b 2022-07-16)" ></div>
</body></html>